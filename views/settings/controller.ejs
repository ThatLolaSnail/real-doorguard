<%- include('../template.ejs',{mode:"header"}); %>

<h1>Settings: Controllers</h1>

<%- include('settings-template.ejs'); %>

<p>
    A Controller like a rule, it's everything between a button press and a bell ring, so all the settings.<br>
    You can edit or delete the entries.<br>
    Click "Test" to fire the controller for testing the outputs.
</p>

<p>
    These are all controllers:
</p>

<table class="table table-striped dgdatatable">
    <thead class="thead-light">
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Name</th>
            <th scope="col">Inputs</th>
            <th scope="col">Outputs</th>
            <th scope="col">Conditions</th>
            <th scope="col">Time</th>
            <th scope="col">Enabled</th>
            <th></th>
        </tr>
    </thead>

    <% for (let controller of controllers.values()){ %>
    <tr>
        <td><%= controller.id %></td>
        <td><%= controller.name %></td>
        <td><%= controller.inputs %></td>
        <td><%= controller.outputs %></td>
        <td><%= controller.getConditionAsString() %></td>
        <td><%= controller.getTimeAsString() %></td>
        <td><%= controller.enabled ? 'Yes' : 'No' %></td>
        <td>
            <a href="/settings/controller/edit?id=<%= controller.id %>">Edit</a>
            <a href="/settings/controller/delete?id=<%= controller.id %>">Delete</a>
            <a href="/settings/controller/test?id=<%= controller.id %>">Test</a>
        </td>
    </tr>
    <% } %>
</table>

<p>
    <a href="/settings/controller/edit">Add controller</a>
</p>

<%- include('../template.ejs',{mode:"footer"}); %>
